{{document-title title="Play"}}
{{#page-header}}
  <div class="row">
    {{#if lifecycle.isInExpTraining}}
    <div class="col-sm-12"><span id="exp-play-title">Experiment &mdash; training</span></div>
    {{else if lifecycle.isInExpDoing}}
      <div class="col-sm-4"><span id="exp-play-title">Experiment</span></div>
      <div class="col-sm-8"><small>
        Completed {{h-pluralize currentProfile.reformulationsCount 'sentence'}} out of {{shaping.experimentWork}}
        {{sl-progress-bar id="exp-progress" value=expProgress striped=true title="There's a pause every 10 sentences"}}
        </small></div>
    {{else}}{{! lifecycle is in playing }}
      <div class="col-sm-12"><span id="exp-play-title">Play <small><span id="available-sentences">available sentences <span class="badge">{{currentProfile.availableTreesBucket}}</span></span> | <span id="next-credit">next credit in <span class="badge">{{currentProfile.nextCreditIn}}</span> sentences</span></small></span></div>
    {{/if}}{{! lifecycle }}
  </div>
{{/page-header}}

{{#page-body}}
  {{#if isInInstructions}}
    {{play-instructions
        doExpIntro=doExpIntro
        doPlayIntro=doPlayIntro
        expIntroDone="expIntroDone"
        playIntroDone="playIntroDone"
        next="task.read"}}

  {{else if isInTaskReading}}
    {{play-read
        sentence=currentSentence
        duration=readDuration
        next="task.distract"
        timeout="task.distract"}}

  {{else if isInTaskDistracting}}
    {{play-distract
        next="task.write.user"}}

  {{else if isInTaskWritingUser}}
    {{play-write
        minTokens=minTokens
        parentSentence=currentSentence
        duration=writeDuration
        streak=streak
        next="processWriting"
        timeout="task.timeout"}}

  {{else if isInTaskWritingProcessing}}
    <h3>Loading...</h3>

  {{else if isInTaskTimedout}}
    {{play-timeout
        next="task.read"}}

  {{else if isInInfo}}
    {{play-inform
        events=events
        lastSentence=currentSentence
        instruct="instruct"
        newTrial="task.read"}}

  {{/if}}
{{/page-body}}
